<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Genshin Impact</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="CSS/style.css">
    <link rel="icon" href="GI_logo.jpg" type="image/x-icon">
</head>

<body>
  <navbar id="navbar">
  <a class="nav" href="index.html">Home</a>
  <a class="nav" href="#">Characters</a>
  <img src="GI_logo.jpg" alt="" class="logo">

  <div class="dropdown">
    <button class="dropbtn">Database â–¾</button>
    <div class="dropdown-content">
      <a href="databaseArti.html">Artifacts</a>
      <a href="weapons.html">Weapons</a>
      <a href="">Farmables</a>
      <hr>
      <a href="">Team Comps</a>
    </div>
  </div>

  <a class="nav" href="build.html">Check Build</a>

  <!-- âœ… Burger icon -->
  <div class="burger" id="burger">
    <span></span>
    <span></span>
    <span></span>
  </div>
</navbar>

<section class="checkBuild">
<video id="bgvid" autoplay muted loop playsinline>
  <source src="bgvid.mp4" type="video/mp4">
  Your browser does not support the video tag.
</video>

  <div class="form-container" id="builds">
    <h2 class="text-center">Character Build Form</h2>
    <p class="text-small mb-1">Please don't add "%" and make sure to round it up.</p>

    <form id="buildForm">

      <!-- Character Selection -->
      <div class="form-row">
        <div class="form-group">
          <label for="character" class="mt-3">Character</label>
          <select id="character" name="character" required>
            <option value="">Select character</option>
            <option value="traveler">Traveler</option>
            <option value="albedo">Albedo</option>
            <option value="alhaitham">Alhaitham</option>
            <option value="aloy">Aloy</option>
            <option value="amber">Amber</option>
            <option value="arlecchino">Arlecchino</option>
            <option value="arataki_itto">Arataki Itto</option>
            <option value="ayato">Ayato</option>
            <option value="baizhu">Baizhu</option>
            <option value="barbara">Barbara</option>
            <option value="beidou">Beidou</option>
            <option value="bennett">Bennett</option>
            <option value="candace">Candace</option>
            <option value="citlali">Citlali</option>
            <option value="charlotte">Charlotte</option>
            <option value="chasca">Chasca</option>
            <option value="chevreuse">Chevreuse</option>
            <option value="chiori">Chiori</option>
            <option value="chongyun">Chongyun</option>
            <option value="clorinde">Clorinde</option>
            <option value="collei">Collei</option>
            <option value="cyno">Cyno</option>
            <option value="dahlia">Dahlia</option>
            <option value="dehya">Dehya</option>
            <option value="diluc">Diluc</option>
            <option value="diona">Diona</option>
            <option value="dori">Dori</option>
            <option value="emilie">Emilie</option>
            <option value="escoffier">Escoffier</option>
            <option value="eula">Eula</option>
            <option value="faruzan">Faruzan</option>
            <option value="fischl">Fischl</option>
            <option value="freminet">Freminet</option>
            <option value="furina">Furina</option>
            <option value="gaming">Gaming</option>
            <option value="ganyu">Ganyu</option>
            <option value="gorou">Gorou</option>
            <option value="heizou">Heizou</option>
            <option value="hu_tao">Hu Tao</option>
            <option value="iansan">Iansan</option>
            <option value="ifa">Ifa</option>
            <option value="ineffa">Ineffa</option>
            <option value="jean">Jean</option>
            <option value="kaedehara_kazuha">Kaedehara Kazuha</option>
            <option value="kachina">Kachina</option>
            <option value="kaeya">Kaeya</option>
            <option value="kaveh">Kaveh</option>
            <option value="keqing">Keqing</option>
            <option value="kinich">Kinich</option>
            <option value="kirara">Kirara</option>
            <option value="klee">Klee</option>
            <option value="kokomi">Kokomi</option>
            <option value="kuki_shinobu">Kuki Shinobu</option>
            <option value="kujou_sara">Kujou Sara</option>
            <option value="lan_yan">Lan Yan</option>
            <option value="layla">Layla</option>
            <option value="lisa">Lisa</option>
            <option value="lynette">Lynette</option>
            <option value="lyney">Lyney</option>
            <option value="mavuika">Mavuika</option>
            <option value="mika">Mika</option>
            <option value="mona">Mona</option>
            <option value="mualani">Mualani</option>
            <option value="nahida">Nahida</option>
            <option value="navia">Navia</option>
            <option value="neuvillette">Neuvillette</option>
            <option value="ningguang">Ningguang</option>
            <option value="noelle">Noelle</option>
            <option value="nilou">Nilou</option>
            <option value="ororon">Ororon</option>
            <option value="qiqi">Qiqi</option>
            <option value="raiden_shogun">Raiden Shogun</option>
            <option value="razor">Razor</option>
            <option value="rosaria">Rosaria</option>
            <option value="sayu">Sayu</option>
            <option value="sethos">Sethos</option>
            <option value="shenhe">Shenhe</option>
            <option value="sigewinne">Sigewinne</option>
            <option value="skirk">Skirk</option>
            <option value="sucrose">Sucrose</option>
            <option value="tartaglia">Tartaglia</option>
            <option value="thoma">Thoma</option>
            <option value="tighnari">Tighnari</option>
            <option value="varessa">Varessa</option>
            <option value="venti">Venti</option>
            <option value="wanderer">Wanderer</option>
            <option value="wriothesley">Wriothesley</option>
            <option value="xiangling">Xiangling</option>
            <option value="xianyun">Xianyun</option>
            <option value="xiao">Xiao</option>
            <option value="xingqiu">Xingqiu</option>
            <option value="xinyan">Xinyan</option>
            <option value="yae_miko">Yae Miko</option>
            <option value="yaoyao">Yaoyao</option>
            <option value="yelan">Yelan</option>
            <option value="yumemizuki_mizuki">Yumemizuki Mizuki</option>
            <option value="yun_jin">Yun Jin</option>
            <option value="zhongli">Zhongli</option>
          </select>
        </div>
      </div>

      <!-- Artifact Selection -->
      <div class="form-row">
        <div class="form-group">
          <label for="artifacts" class="mt-3">Artifacts</label>
          <select id="artifacts" name="artifacts" required>
            <option value="">Select Artifact</option>
            <option value="archaic_petra">Archaic Petra</option>
            <option value="blizzard_strayer">Blizzard Strayer</option>
            <option value="bloodstained_chivalry">Bloodstained Chivalry</option>
            <option value="crimson_witch_of_flames">Crimson Witch of Flames</option>
            <option value="deepwood_memories">Deepwood Memories</option>
            <option value="desert_pavilion_chronicle">Desert Pavilion Chronicle</option>
            <option value="echoes_of_an_offering">Echoes of an Offering</option>
            <option value="emblem_of_severed_fate">Emblem of Severed Fate</option>
            <option value="finale_of_the_deep_galleries">Finale of the Deep Galleries</option>
            <option value="flower_of_paradise_lost">Flower of Paradise Lost</option>
            <option value="fragment_of_harmonic_whimsy">Fragment of Harmonic Whimsy</option>
            <option value="gilded_dreams">Gilded Dreams</option>
            <option value="gladiators_finale">Gladiator's Finale</option>
            <option value="golden_troupe">Golden Troupe</option>
            <option value="heart_of_depth">Heart of Depth</option>
            <option value="husk_of_opulent_dreams">Husk of Opulent Dreams</option>
            <option value="lavawalker">Lavawalker</option>
            <option value="long_nights_oath">Long Night's Oath</option>
            <option value="maiden_beloved">Maiden Beloved</option>
            <option value="marechaussee_hunter">Marechaussee Hunter</option>
            <option value="night_of_the_skys_unveiling">Night of the Sky's Unveiling</option>
            <option value="nighttime_whispers_in_the_echoing_woods">Nighttime Whispers in the Echoing Woods</option>
            <option value="noblesse_oblige">Noblesse Oblige</option>
            <option value="nymphs_dream">Nymph's Dream</option>
            <option value="obsidian_codex">Obsidian Codex</option>
            <option value="ocean_hued_clam">Ocean-Hued Clam</option>
            <option value="pale_flame">Pale Flame</option>
            <option value="retracing_bolide">Retracing Bolide</option>
            <option value="scroll_of_the_hero_of_cinder_city">Scroll of the Hero of Cinder City</option>
            <option value="silken_moons_serenade">Silken Moon's Serenade</option>
            <option value="shimenawas_reminiscence">Shimenawa's Reminiscence</option>
            <option value="song_of_days_past">Song of Days Past</option>
            <option value="tenacity_of_the_millelith">Tenacity of the Millelith</option>
            <option value="thundering_fury">Thundering Fury</option>
            <option value="thundersoother">Thundersoother</option>
            <option value="unfinished_reverie">Unfinished Reverie</option>
            <option value="vermillion_hereafter">Vermillion Hereafter</option>
            <option value="viridescent_venerer">Viridescent Venerer</option>
            <option value="vourukashas_glow">Vourukasha's Glow</option>
            <option value="wanderers_troupe">Wanderer's Troupe</option>
          </select>
        </div>
      </div>

      <div class="form-row"><div class="form-info mt-2">
        <label for="hp">HP</label>
        <input type="number" id="hp" name="hp" placeholder="Enter HP" required>
      </div></div>

      <div class="form-row"><div class="form-info">
        <label for="atk">ATK</label>
        <input type="number" id="atk" name="atk" placeholder="Enter ATK" required>
      </div></div>

      <div class="form-row"><div class="form-info">
        <label for="def">DEF</label>
        <input type="number" id="def" name="def" placeholder="Enter DEF" required>
      </div></div>

      <div class="form-row"><div class="form-info">
        <label for="mastery">Elemental Mastery</label>
        <input type="number" id="mastery" name="mastery" placeholder="Enter Elemental Mastery" required>
      </div></div>

      <div class="form-row"><div class="form-info">
        <label for="bonus">DMG Bonus</label>
        <input type="number" id="bonus" name="bonus" placeholder="Enter characters element DMG bonus" required>
      </div></div>

      <div class="form-row"><div class="form-info">
        <label for="rate">Crit Rate</label>
        <input type="number" id="rate" name="rate" placeholder="Enter Crit Rate" required>
      </div></div>

      <div class="form-row"><div class="form-info">
        <label for="dmg">Crit DMG</label>
        <input type="number" id="dmg" name="dmg" placeholder="Enter Crit Damage" required>
      </div></div>

      <div class="form-row"><div class="form-info">
        <label for="heal">Healing Bonus</label>
        <input type="text" id="heal" name="heal" placeholder="Enter Healing Bonus or N/A if none" required>
      </div></div>

      <div class="form-row"><div class="form-info">
        <label for="recharge">Energy Recharge</label>
        <input type="number" id="recharge" name="recharge" placeholder="Enter Energy Recharge" required>
      </div></div>

      <div class="form-row">
        <button type="submit" class="button">Check Build</button>
      </div>

      <h2 class="text-center">Recommended Stats</h2>
      <div id="result" class="alert hidden"></div>
    </form>
  </div>
</section>

<footer class="footer_text">
  <p>
    Gracer Ann S. Escalada BSIT 2A Platform Technologies <br>
    West Visayas State University - Main Campus<br>
    College of Information and Communications Technology<br>
  </p>

  <div class="footer_infos">
    <div>
      <p>
        Facebook: Gracer Ann S. Escalada <br>
        Email: gracerann.escalada@wvsu.edu.ph <br>
        Contact No.: 09663957445<br>
      </p>
    </div>

    <div>
      <p>
        I do not claim any of the materials or information here <br>
        This is only for educational purposes<br>
        Any materials and information used are credited to their owners.<br>
      </p>
    </div>

    <div>
      <p>
        Genshin Impact and all related assets are <br>
        Â© COGNOSPHERE PTE. LTD. / HoYoverse.<br>
        All rights reserved.<br>
      </p>
    </div>
  </div>

  <div class="footer_logo">
    <img src="CICT_Logo.png" alt="">
    <img src="WVSU_Logo.png" alt="">
    <img src="GI_logo.jpg" alt="">
  </div>
</footer>

<script src="JS/buildScript.js"></script>

<audio id="bgm" src="opening.mp3" loop muted></audio>

<script>
  // ====== Navbar Burger Toggle ======
  const burger = document.getElementById('burger');
  const navbar = document.getElementById('navbar');

  if (burger && navbar) {
    burger.addEventListener('click', () => {
      burger.classList.toggle('active');
      navbar.classList.toggle('active');
    });
  }

  // ====== Background Music and Form Logic ======
  const audio = document.getElementById("bgm");
  const form = document.getElementById('buildForm');
  const resultDiv = document.getElementById('result');

  // Background music setup
  audio.play().catch(() => {});
  const startMusic = () => {
    audio.muted = false; 
    audio.play();       
    document.removeEventListener("click", startMusic);
    document.removeEventListener("keydown", startMusic);
  };
  document.addEventListener("click", startMusic);
  document.addEventListener("keydown", startMusic);

  let recommendedStats = {};
  let timeouts = []; // store all timeouts

  fetch('recommendedStats.json')
    .then(response => response.json())
    .then(data => {
      recommendedStats = data;
      console.log('JSON loaded', recommendedStats);
    })
    .catch(err => console.error('Failed to load JSON', err));

  // Prevent multiple listeners
  if (form && !form.hasAttribute('data-listener')) {
    form.setAttribute('data-listener', 'true');
    form.addEventListener('submit', (e) => {
      e.preventDefault();

      // ðŸ§¹ Clear old timeouts
      timeouts.forEach(t => clearTimeout(t));
      timeouts = [];

      // ðŸ§¹ Reset result area
      resultDiv.innerHTML = '';
      resultDiv.classList.remove('hidden');

      Object.assign(resultDiv.style, {
        display: 'grid',
        gridTemplateColumns: 'repeat(2, 1fr)',
        gap: '20px',
        marginTop: '20px'
      });

      const character = form.character.value;
      const recommended = recommendedStats[character];

      if (!recommended) {
        resultDiv.innerHTML = 'No recommended stats found for this character.';
        return;
      }

      const keyMap = {
        "Artifact": "Recommended Artifact",
        "HP": "Health Points",
        "ATK": "Attack",
        "DEF": "Defense",
        "Mastery": "Elemental Mastery",
        "DMG Bonus": "Elemental DMG Bonus",
        "CRIT Rate": "Crit Rate",
        "CRIT DMG": "Crit Damage",
        "Healing Bonus": "Healing Bonus",
        "Recharge": "Energy Recharge"
      };

      const createBox = (label, value) => {
        const box = document.createElement('div');
        Object.assign(box.style, {
          border: '1px solid #000',
          borderRadius: '10px',
          boxShadow: '0 4px 24px rgba(0,0,0,0.25)',
          fontSize: '2vh',
          padding: '30px',
          background: 'rgba(242,196,141,0.8)',
          textAlign: 'center',
          opacity: '0',
          transform: 'translateY(20px)',
          transition: 'all 0.5s ease, transform 0.2s'
        });

        box.addEventListener('mouseenter', () => {
          box.style.transform = 'scale(1.07)';
        });
        box.addEventListener('mouseleave', () => {
          box.style.transform = 'scale(1)';
        });

        box.innerHTML = `<strong>${label}:</strong> ${value}`;
        return box;
      };

      Object.keys(recommended).forEach((key, index) => {
        const t1 = setTimeout(() => {
          const label = keyMap[key] || key;
          const box = createBox(label, recommended[key]);
          resultDiv.appendChild(box);

          const t2 = setTimeout(() => {
            box.style.opacity = '1';
            box.style.transform = 'translateY(0)';
          }, 50);

          timeouts.push(t2);
        }, index * 500);

        timeouts.push(t1);
      });
    });
  }
</script>



</body>
</html>
